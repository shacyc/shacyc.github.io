<html>

<head>

</head>

<body>
    <div>
        <span>google map uri: </span>
        <input id="googleUri" onchange="decodeUri(this);">
    </div>
    <div id='decodeResult'>

    </div>
</body>
<script>
    // Only images which 'src' attrib match this will be considered for moving around.
    // Looks like some kind of string-based protobuf, maybe??
    // Only the roads (and terrain, and vector-based stuff) match this pattern
    var _roadRegexp = /!1i(\d+)!2i(\d+)!3i(\d+)!/;

    // On the other hand, raster imagery matches this other pattern
    var _satRegexp = /x=(\d+)&y=(\d+)&z=(\d+)/;

    // On small viewports, when zooming in/out, a static image is requested
    // This will not be moved around, just removed from the DOM.
    var _staticRegExp = /StaticMapService\.GetMapImage/;

    function decodeUri(sender) {
        var val = sender.value;
        var coords;
        var match = val.match(_roadRegexp);
        var sublayer = 0;

        if (match) {
            coords = {
                z: match[1],
                x: match[2],
                y: match[3]
            };
        } else {
            match = val.match(_satRegexp);
            if (match) {
                coords = {
                    x: match[1],
                    y: match[2],
                    z: match[3]
                };
            }
        }

        if (coords) {
            debugger
        }

    }
</script>

</html>